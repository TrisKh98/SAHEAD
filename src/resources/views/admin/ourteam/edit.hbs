<form id="ourForm" method='POST' action='/ourteam/{{our._id}}?_method=PUT' enctype='multipart/form-data' class='border p-4 shadow rounded bg-light'>
  <a href='/ourteam/view'>Xem</a>
  <label for='name'>T√™n tv:</label>
  <div id="formVi">
        <h3>üáªüá≥ Th√¥ng tin ti·∫øng Vi·ªát</h3>
        <div class="mb-3">
            <label for="vi_name" class="form-label">T√™n s·ª± ki·ªán</label>
            <input type="text" id="vi_name" name="vi_name" class="form-control" value="{{ our.vi_en.vi.name }}">
        </div>
    </div>

    <!-- Form Ti·∫øng Anh -->
    <div id="formEn" style="display: none;">
        <h3>üá¨üáß English Information</h3>
        <div class="mb-3">
            <label for="en_name" class="form-label">Event Name</label>
            <input type="text" name="en_name" id="en_name" class="form-control" value="{{ our.vi_en.en.name }}">
        </div>
    </div>

  <div class='mb-3'>
    <label class='form-label fw-bold'>·∫¢nh hi·ªán t·∫°i:</label>
    <img src='{{our.image}}' class='img-thumbnail' width='150' />
    <label class='form-label fw-bold'>Ch·ªçn h√¨nh ·∫£nh m·ªõi:</label>
    <input type='file' class='form-control' name='image' accept='image/*' />
  </div>
  

  <div class="mb-3">
      <label class="form-label fw-bold">Ch·ªçn Ban:</label>
      {{#each sub}}
        <div class="form-check">
          <input class="form-check-input" type="checkbox" name="sub" value="{{this._id}}"
          {{#if (includes ../our.sub this._id)}}checked{{/if}}>
          <label class="form-check-label">
            <span class="vi">{{this.vi_en.vi.name}}</span>
            <span class="en" style="display: none;">{{this.vi_en.en.name}}</span>
          </label>
        </div>
      {{/each}}
    </div>
    <div class="mb-3">
      <label class="form-label fw-bold">Ch·ªçn ch·ª©c v·ª•:</label>
      {{#each position}}
        <div class="form-check">
          <input class="form-check-input" type="checkbox" name="position" value="{{this._id}}"
          {{#if (includes ../our.position this._id)}}checked{{/if}}>
          <label class="form-check-label">
            <span class="vi">{{this.vi_en.vi.name}}</span>
            <span class="en" style="display: none;">{{this.vi_en.en.name}}</span>
          </label>
        </div>
      {{/each}}
    </div>
    <div class="mb-3">
      <label class="form-label fw-bold">Ch·ªçn vai tr√≤:</label>
      {{#each roles}}
        <div class="form-check">
          <input class="form-check-input" type="checkbox" name="roles" value="{{this._id}}"
          {{#if (includes ../our.roles this._id)}}checked{{/if}}>
          <label class="form-check-label">
            <span class="vi">{{this.vi_en.vi.name}}</span>
            <span class="en" style="display: none;">{{this.vi_en.en.name}}</span>
          </label>
        </div>
      {{/each}}
    </div>

    <div>
      <label for="classify">Ph√¢n lo·∫°i:</label>
      <select id="classify" name="classify">
        <option value="·ª®ng vi√™n" {{#if (eq our.classify "·ª®ng vi√™n")}}selected{{/if}}>·ª®ng vi√™n</option>
        <option value="Ban qu·∫£n l√Ω" {{#if (eq our.classify "Ban qu·∫£n l√Ω")}}selected{{/if}}>Ban qu·∫£n l√Ω</option>
      </select>
    </div>

    <div>
      <label for="specialized">Chuy√™n ng√†nh:</label>
      <select id="specialized" name="specialized">
        <option value="CN1" {{#if (eq our.specialized "CN1")}}selected{{/if}}>C√¥ng ngh·ªá 1</option>
        <option value="CN2" {{#if (eq our.specialized "CN2")}}selected{{/if}}>C√¥ng ngh·ªá 2</option>
      </select>
    </div>

    <div>
      <label for="degree">Tr√¨nh ƒë·ªô:</label>
      <select id="degree" name="degree">
        <option value="None" {{#if (eq our.degree "None")}}selected{{/if}}>Kh√¥ng c√≥</option>
        <option value="Master" {{#if (eq our.degree "Master")}}selected{{/if}}>Th·∫°c sƒ©</option>
        <option value="Associate Professor" {{#if (eq our.degree "Associate Professor")}}selected{{/if}}>Ph√≥ Gi√°o s∆∞</option>
        <option value="Professor" {{#if (eq our.degree "Professor")}}selected{{/if}}>Gi√°o s∆∞</option>
      </select>
    </div>

    <div>
      <label for="typeStudent">Lo·∫°i sinh vi√™n:</label>
      <select id="typeStudent" name="typeStudent">
        <option value="Qu·ªëc n·ªôi" {{#if (eq our.typeStudent "Qu·ªëc n·ªôi")}}selected{{/if}}>Qu·ªëc n·ªôi</option>
        <option value="Qu·ªëc t·∫ø" {{#if (eq our.typeStudent "Qu·ªëc t·∫ø")}}selected{{/if}}>Qu·ªëc t·∫ø</option>
      </select>
    </div>


  <input type="hidden" id="vi_en_json" name="vi_en_json">
  <button type='submit'>C·∫≠p nh·∫≠t TV</button>
</form>
<script>
document.addEventListener("DOMContentLoaded", function() {

    document.getElementById("ourForm").addEventListener("submit", function(event) {
        event.preventDefault();
        const viName = document.getElementById("vi_name").value.trim();
        const enName = document.getElementById("en_name").value.trim();
        const data = { 
          vi: { name: viName }, 
          en: { name: enName } 
          };
        document.getElementById("vi_en_json").value = JSON.stringify(data);
        this.submit();
    });
});
</script>
