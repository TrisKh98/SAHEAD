<div class='mt-4'>
  <h3>ThÃªm Tag</h3>
  <a href='/tags/view'>Xem</a>
  <form  id="tagForm" method='POST'action='/tags/{{tag._id}}?_method=PUT'>
    <div id="formVi">
        <h3>ðŸ‡»ðŸ‡³ ThÃ´ng tin tiáº¿ng Viá»‡t</h3>
        <div class="mb-3">
            <label for="vi_name" class="form-label">TÃªn nhÃ£n</label>
            <input type="text" id="vi_name" name="vi_name" class="form-control" value="{{ tag.vi_en.vi.name }}">
        </div>
        <div class="mb-3">
            <label for="vi_overview" class="form-label">Giá»›i thiá»‡u</label>
            <textarea id="vi_overview" name="vi_overview" class="form-control">{{ tag.vi_en.vi.overview }}</textarea>
        </div>
    </div>

    <!-- Form Tiáº¿ng Anh -->
    <div id="formEn" style="display: none;">
        <h3>ðŸ‡¬ðŸ‡§ English Information</h3>
        <div class="mb-3">
            <label for="en_name" class="form-label">Tag Name</label>
            <input type="text" name="en_name" id="en_name" class="form-control" value="{{ tag.vi_en.en.name }}">
        </div>
        <div class="mb-3">
            <label for="en_overview" class="form-label">Overview</label>
            <textarea id="en_overview" name="en_overview" class="form-control">{{ tag.vi_en.en.overview }}</textarea>
        </div>
    </div>

    <input type="hidden" id="vi_en_json" name="vi_en_json">
    <button type='submit' class='btn btn-primary'>Sá»­a</button>
  </form>
</div>
<script>
document.addEventListener("DOMContentLoaded", function() {

    document.getElementById("tagForm").addEventListener("submit", function(event) {
        event.preventDefault();
        const viName = document.getElementById("vi_name").value.trim();
        const enName = document.getElementById("en_name").value.trim();
        const viOverview = CKEDITOR.instances.vi_overview.getData().trim();
        const enOverview = CKEDITOR.instances.en_overview.getData().trim();
        const data = { 
          vi: { name: viName, overview: viOverview }, 
          en: { name: enName, overview: enOverview } 
          };
        document.getElementById("vi_en_json").value = JSON.stringify(data);
        this.submit();
    });
});
</script>