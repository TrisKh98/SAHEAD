

<h2>Th√™m D·ª± √Ån</h2>

<!-- N√∫t chuy·ªÉn ƒë·ªïi gi·ªØa form ti·∫øng Vi·ªát & ti·∫øng Anh -->

<a href="/project/view" class="btn btn-success">Xem</a>

<form id="projectForm" action="/project/store" method="POST" enctype="multipart/form-data">
    <!-- Form Ti·∫øng Vi·ªát -->
    <div id="formVi">
        <h3>üáªüá≥ Th√¥ng tin ti·∫øng Vi·ªát</h3>
        <div class="mb-3">
            <label for="vi_name" class="form-label">T√™n d·ª± √°n</label>
            <input type="text" id="vi_name" name="vi_name" class="form-control">
        </div>
        <div class="mb-3">
            <label for="vi_overview" class="form-label">T·ªïng quan</label>
            <textarea id="vi_overview" name="vi_overview" class="form-control"></textarea>
        </div>
        <div class="mb-3">
            <label for="vi_general_goal" class="form-label">M·ª•c ti√™u chung</label>
            <textarea id="vi_general_goal" name="vi_general_goal" class="form-control"></textarea>
        </div>
        <div class="mb-3">
            <label for="vi_specific_goal" class="form-label">M·ª•c ti√™u c·ª• th·ªÉ</label>
            <textarea id="vi_specific_goal" name="vi_specific_goal" class="form-control"></textarea>
        </div>
        <div class="mb-3">
            <label for="vi_outcomes" class="form-label">K·∫øt qu·∫£ ƒë·∫°t ƒë∆∞·ª£c</label>
            <textarea id="vi_outcomes" name="vi_outcomes" class="form-control"></textarea>
        </div>
    </div>

    <!-- Form Ti·∫øng Anh -->
    <div id="formEn" style="display: none;">
        <h3>üá¨üáß English Information</h3>
        <div class="mb-3">
            <label for="en_name" class="form-label">Project Name</label>
            <input type="text" name="en_name" id="en_name" class="form-control">
        </div>
        <div class="mb-3">
            <label for="en_overview" class="form-label">Overview</label>
            <textarea id="en_overview" name="en_overview" class="form-control"></textarea>
        </div>
        <div class="mb-3">
            <label for="en_general_goal" class="form-label">General Goal</label>
            <textarea id="en_general_goal" name="en_general_goal" class="form-control"></textarea>
        </div>
        <div class="mb-3">
            <label for="en_specific_goal" class="form-label">Specific Goal</label>
            <textarea id="en_specific_goal" name="en_specific_goal" class="form-control"></textarea>
        </div>
        <div class="mb-3">
            <label for="en_outcomes" class="form-label">Expected Outcomes</label>
            <textarea id="en_outcomes" name="en_outcomes" class="form-control"></textarea>
        </div>
    </div>

    <div class='mb-3'>
        <label class='form-label fw-bold' id="timelineColumn">Th·ªùi gian:</label>
        <input type='date' class='form-control' name='startDate' />
        <input type='date' class='form-control mt-2' name='endDate' />
    </div>

    <!-- Upload h√¨nh ·∫£nh -->
    <div class="mb-3">
        <label for="image" class="form-label" id="newImage">H√¨nh ·∫£nh</label>
        <input type="file" name="image" class="form-control" accept="image/*">
    </div>

    <!-- Tr∆∞·ªùng hidden l∆∞u d·ªØ li·ªáu JSON -->
    <input type="hidden" id="vi_en_json" name="vi_en_json">

    <button type="submit" class="btn btn-success" id="save">L∆∞u</button>
</form>

<script>
document.addEventListener("DOMContentLoaded", function() {
    {{!-- const formVi = document.getElementById("formVi");
    const formEn = document.getElementById("formEn");
    const btnVi = document.getElementById("switchToVi");
    const btnEn = document.getElementById("switchToEn");

    // H√†m c·∫≠p nh·∫≠t giao di·ªán theo ng√¥n ng·ªØ ƒë√£ ch·ªçn
    function updateLanguage(lang) {
        if (lang === "vi") {
            formVi.style.display = "block";
            formEn.style.display = "none";
        } else {
            formVi.style.display = "none";
            formEn.style.display = "block";
        }
    }

    // Khi nh·∫•n n√∫t Ti·∫øng Vi·ªát
    btnVi.addEventListener("click", function (event) {
        event.preventDefault(); // NgƒÉn reload trang
        localStorage.setItem("selectedLanguage", "vi"); // L∆∞u v√†o localStorage
        updateLanguage("vi");
    });

    // Khi nh·∫•n n√∫t Ti·∫øng Anh
    btnEn.addEventListener("click", function (event) {
        event.preventDefault(); // NgƒÉn reload trang
        localStorage.setItem("selectedLanguage", "en"); // L∆∞u v√†o localStorage
        updateLanguage("en");
    });

    // L·∫•y ng√¥n ng·ªØ ƒë√£ l∆∞u t·ª´ localStorage v√† c·∫≠p nh·∫≠t giao di·ªán
    const savedLanguage = localStorage.getItem("selectedLanguage") || "vi";
    updateLanguage(savedLanguage); --}}

  
   // X·ª≠ l√Ω submit form
    document.getElementById("projectForm").addEventListener("submit", function(event) {
        event.preventDefault();
        const viName = document.getElementById("vi_name").value.trim();
        const enName = document.getElementById("en_name").value.trim();
        const viOverview = CKEDITOR.instances.vi_overview.getData().trim();
        const enOverview = CKEDITOR.instances.en_overview.getData().trim();
        const viGeneralGoal = CKEDITOR.instances.vi_general_goal.getData().trim();
        const enGeneralGoal = CKEDITOR.instances.en_general_goal.getData().trim();
        const viSpecificGoal = CKEDITOR.instances.vi_specific_goal.getData().trim();
        const enSpecificGoal = CKEDITOR.instances.en_specific_goal.getData().trim();
        const viOutcomes = CKEDITOR.instances.vi_outcomes.getData().trim();
        const enOutcomes = CKEDITOR.instances.en_outcomes.getData().trim();

        if (!viName && !enName) {
            alert("Vui l√≤ng nh·∫≠p √≠t nh·∫•t m·ªôt trong hai t√™n d·ª± √°n (Ti·∫øng Vi·ªát ho·∫∑c Ti·∫øng Anh).");
            return;
        }

        // Chu·∫©n b·ªã d·ªØ li·ªáu JSON
        const data = {
            vi: { 
                name: viName, 
                overview: viOverview, 
                general_goal: viGeneralGoal, 
                specific_goal: viSpecificGoal, 
                outcomes: viOutcomes 
            },
            en: { 
                name: enName, 
                overview: enOverview, 
                general_goal: enGeneralGoal, 
                specific_goal: enSpecificGoal, 
                outcomes: enOutcomes 
            }
        };

        document.getElementById("vi_en_json").value = JSON.stringify(data);
        this.submit();
    });
});
</script>


{{!-- <div class='container mt-5'>
  <h2 class='text-center text-primary'>Th√™m Project</h2>
  <a href='/project/view'>Xem [{{deletedCount}}]</a>
  <form
    action='/project/store'
    method='POST'
    enctype='multipart/form-data'
    class='border p-4 shadow rounded bg-light'
  >
    <div class='mb-3'>
      <label class='form-label fw-bold'>T√™n Project:</label>
      <input type='text' class='form-control' name='name' required />
    </div>

    <div class='mb-3'>
      <label class='form-label fw-bold'>T·ªïng quan:</label>
      <textarea class='form-control' name='overview'></textarea>
    </div>

    <div class='mb-3'>
      <label class='form-label fw-bold'>M·ª•c ti√™u:</label>
      <textarea class='form-control' name='aim'></textarea>
    </div>

    <div class='mb-3'>
      <label class='form-label fw-bold'>Ho·∫°t ƒë·ªông:</label>
      <textarea class='form-control' name='activities'></textarea>
    </div>

    <div class='mb-3'>
      <label class='form-label fw-bold'>K·∫øt qu·∫£:</label>
      <textarea class='form-control' name='outcomes'></textarea>
    </div>

    <div class='mb-3'>
      <label class='form-label fw-bold'>Th·ªùi gian:</label>
      <input type='date' class='form-control' name='startDate' />
      <input type='date' class='form-control mt-2' name='endDate' />
    </div>

    <div class='mb-3'>
      <label class='form-label fw-bold'>H√¨nh ·∫£nh:</label>
      <input type='file' class='form-control' name='image' accept='image/*' />
    </div>

    <button type='submit' class='btn btn-primary w-100 mt-3'>Th√™m Project</button>
  </form>
</div> --}}
